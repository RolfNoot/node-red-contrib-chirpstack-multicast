<script type="text/javascript">
    RED.nodes.registerType('multicast group downlink',{
        category: 'ChirpStack',
        color: '#a6bbcf',
        defaults: {
            name: { value:"" },
            serverConfig: { type:"chirpstack-server", required:true },
            encoding: { value:"hex" }
        },
        inputs:1,
        outputs:1,
        icon: "bridge.svg",
        label: function() {
            return this.name || "multicast group downlink";
        }
    });
</script>

<script type="text/html" data-template-name="multicast group downlink">
    <div class="form-row">
        <label for="node-input-serverConfig"><i class="fa fa-globe"></i> Server</label>
        <input type="text" id="node-input-serverConfig" placeholder="Select a ChirpStack Server"/>
    </div>
    <div class="form-row">
        <label for="node-input-encoding"><i class="fa fa-file-code-o"></i> Payload Encoding</label>
        <select id="node-input-encoding">
          <option value="hex">HEX</option>
          <option value="base64">Base64</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/html" data-help-name="multicast group downlink">
    <p>
      Node to enqueue a multicast group downlink payload for the given <code>multicastGroupId</code>.
    </p>

    <h3>Details</h3>
    <p>
      This node enqueues the input payload using the ChirpStack gRPC API.
      This requires access to the ChirpStack gRPC endpoint and an API token,
      which can be retrieved using the ChirpStack web-interface.
    </p>

    <h3>Input</h3>
    <dl class="message-properties">
      <dt>multicastGroupId <span class="property-type">string</span></dt>
      <dd>Multicast group Id (e.g. <code>81d5545f-973f-4c45-87f2-f917d509581d</code>).</dd>
      <dt>fPort <span class="property-type">number</span></dt>
      <dd>Downlink FPort.</dd>
      <dt>payload <span class="property-type">string</span></dt>
      <dd>Payload encoded in HEX or BASE64. The encoding is determined by this node's settings.</dd>
    </dl>

    <h3>Output</h3>
    <dl class="message-properties">
      <dt>fCnt <span class="property-type">string</span></dt>
      <dd>Frame counter returned by the ChirpStack API.</dd>
    </dl>
</script>
